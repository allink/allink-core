{% load cms_tags sekizai_tags i18n thumbnail allink_user_tags allink_members_tags link_tags %}
{% comment %}
    LOGOUT: requires a form to submit with the POST method (check if logged in an in group 'members')
{% endcomment %}
{% if instance.link_special == 'account_logout' and user.is_authenticated %}
    <form method="post" action="{{instance.get_link_url}}">
    {% csrf_token %}
{% endif %}
    <a href="{{ instance.get_link_url }}{% if instance.link_mailto and instance.email_subject %}?subject={{ instance.email_subject|urlencode }}{% endif %}{% if instance.link_mailto and instance.email_body_text %}&amp;body={{ instance.email_body_text|urlencode }}{% endif %}"
    class="{{instance|link_classes}}"
    {{ instance|link_attribute_string:request }}
    >{% spaceless %}
       {% comment %}
            if button is login-button to member area check if logged in an in group 'members'
        {% endcomment %}

        {% if instance.link_special == 'account_login' and user.is_authenticated %}
            {% trans 'Member Area' %}
        {% else %}
            {{ instance.label }}
        {% endif %}
        {% if instance.link_file.name %}
            {{ instance.link_file.name }}
        {% endif %}
        {%if instance.link_file.description %}
            {{ instance.link_file.description }}
        {% endif %}
        {% for plugin in instance.child_plugin_instances %}
            {% render_plugin plugin %}
        {% endfor %}

{% endspaceless %}</a>

{% comment %}
    LOGOUT
{% endcomment %}
{% if instance.link_special == 'account_logout' and user.is_authenticated %}
    </form>
{% endif %}
